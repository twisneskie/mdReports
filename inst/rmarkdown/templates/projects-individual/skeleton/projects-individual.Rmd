---
title: "`r project$projTitle`"
subtitle: "Project Report"
date: "`r format(Sys.time(), '%d %B, %Y')`"
author: "Generated by: `r Sys.getenv('USERNAME')`"
output: html_document

---

```{r setup, include=FALSE}
# Load functions
source(here("src\\02_report-data.R"))

# Document Options
opts_chunk$set(echo = FALSE)
```

## Project Abstract
`r pull(project, abstract)`

## Data Management Personnel
```{r dm.personnel}
project %>%
  
  select(-data, 
         -abstract,
         -dirName,
         -projTitle) %>%

  kable %>%
  
  kable_styling(full_width = FALSE, position = "left")
```

## All resources

```{r all.resources}
all_resources(project, metaSubset, contacts) %>%
  
  datatable(filter = "top",
            options = list(pageLength = 5,
                           lengthMenu = c(5, 10, 15, 20),
                           scrollX = TRUE,
                           columnDefs = list(list(width = '20%', 
                                                  targets = list(1, 4)))),
            autoHideNavigation = getOption("DT.autoHideNavigation", 
                                           TRUE),
            width = "10in")

```

## Resources with data dictionaries
```{r data.dictionaries, results='asis'}

dictTable <- data_dictionary(project, metaSubset)

if(nrow(dictTable) > 0) {
  
  dictTable %>%
    
    kable %>%
    
    kable_styling(full_width = FALSE, position = "left")
  
} else {

  cat("No data dictionaries created")
}

```

